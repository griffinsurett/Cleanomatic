---
import "@/styles/animations.css";
---
<html lang="en">
  <head>
    <slot name="head" />
  </head>
  <body>
    <slot />

    <!-- Only run observer fallback when scrollâ€‘timeline is NOT supported -->
    <script is:inline>
  if (!CSS.supports('animation-timeline', 'view()')) {
    document.documentElement.classList.add('use-io');

    // run as soon as DOM is parsed
    window.addEventListener('DOMContentLoaded', () => {
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(({ target, isIntersecting }) => {
          if (isIntersecting) {
            target.classList.add('visible');
            obs.unobserve(target);
          }
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.load').forEach(el => io.observe(el));
    });
  }
</script>

  </body>
</html>
