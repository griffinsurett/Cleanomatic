---
import { buildMenuQueries } from "@/utils/ArrayQueryUtils";
import Menu from "./Menu/BarMenu/NavMenu.astro";
import { getContactMenuItems } from "@/queries/ContactMenuQuery";
import { getSocialMenuItems } from "@/queries/SocialMenuQuery";
import PhoneNumber from "./LoopComponents/PhoneNumber/FooterPhoneNumber"; // updated phone number component
import Logo from "./Logo.astro";

const FooterMenu = [
  {
    id: "privacy",
    label: "Privacy Policy",
    slug: "/privacy-policy",
    weight: 10,
  },
  { id: "cookie", label: "Cookie Policy", slug: "/cookie-policy", weight: 20 },
  { id: "contact", label: "Contact Us", slug: "/contact-us", weight: 30 },
];
---

<footer>
  <div class="flex flex-col md:flex-row justify-between items-start italic bg-accent text-bg p-[var(--spacing-lg)]">
    <div class="footer-logo w-1/3">
      <Logo className="logo h5" />
    </div>
    <Menu 
      listClass="flex flex-col justify-start items-start gap-[var(--spacing-sm)]" 
      items={await buildMenuQueries({ FooterMenu })} 
    />
    <Menu
    items={await getSocialMenuItems()}
    listClass="flex flex-col justify-start items-start gap-[var(--spacing-sm)]"
    />
    <Menu
    items={await getContactMenuItems()}
    listClass="flex flex-col justify-start items-start gap-[var(--spacing-sm)]"
    menuItem={{ component: PhoneNumber, class: "phone-menu-item text-right" }}
  />
  </div>
  <div class="bg-primary text-bg p-[var(--spacing-lg)] md:p-[var(--spacing-md)]">
    <div class="footer-copyright flex flex-col md:flex-row justify-center items-center text-center h6 italic gap-[var(--spacing-xs)]">
      <p class="text-[var(--font-size-sm)]">
        &copy; {new Date().getFullYear()} Cleanomatic. All rights reserved.
      </p>
      <p class="text-[var(--font-size-sm)]">
        Created by
        <a
          href="https://griffinswebservices.com"
          class="underline"
          target="_blank"
          rel="noopener noreferrer"
        >
          Griffin's Web Services
        </a>
      </p>
    </div>
  </div>
</footer>

