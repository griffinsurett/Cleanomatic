---
import { buildMenuQueries } from "@/utils/ArrayQueryUtils";
import Menu from "./Menu/BarMenu/NavMenu.astro";
import { getContactMenuItems } from "@/queries/ContactMenuQuery";
import { getSocialMenuItems } from "@/queries/SocialMenuQuery";
import PhoneNumber from "./LoopComponents/ContactMenu/ContactInfo"; // updated contact info component
import Logo from "./Logo.astro";
import Heading from "./Heading";

// Define shared class strings for menus and headings.
const menuListClass = "flex flex-col justify-start items-start gap-[var(--spacing-sm)] h6";
const menuHeadingClass = "h4 mb-[var(--spacing-md)] text-bg";

const FooterMenu = [
  {
    id: "privacy",
    label: "Privacy Policy",
    slug: "/privacy-policy",
    weight: 10,
  },
  {
    id: "cookie",
    label: "Cookie Policy",
    slug: "/cookie-policy",
    weight: 20,
  },
  {
    id: "contact",
    label: "Contact Us",
    slug: "/contact-us",
    weight: 30,
  },
];
---

<footer>
  <div class="flex flex-col md:flex-row justify-between items-start italic bg-accent text-bg py-[var(--spacing-3xl)] px-[var(--spacing-xl)]">
    <div class="footer-logo w-full md:w-1/4 lg:w-1/3 mb-[var(--spacing-lg)]">
      <Logo />
    </div>
    <div class="footer-menus h5 italic flex flex-col md:flex-row justify-between md:w-2/3 lg:w-3/5">
      <div class="footer-menu">
        <Heading tagName="h4" className={menuHeadingClass}>
          Info
        </Heading>
        <Menu
          listClass={menuListClass}
          items={await buildMenuQueries({ FooterMenu })}
        />
      </div>
      <div class="social-menu">
        <Heading tagName="h4" className={menuHeadingClass}>
          Follow Us
        </Heading>
        <Menu
          items={await getSocialMenuItems()}
          listClass={menuListClass}
        />
      </div>
      <div class="contact-info">
        <Heading tagName="h4" className={menuHeadingClass}>
          Contact Us
        </Heading>
        <Menu
          items={await getContactMenuItems()}
          listClass={menuListClass}
          menuItem={{
            component: PhoneNumber,
            class: "phone-menu-item text-right",
          }}
        />
      </div>
    </div>
  </div>
  <div class="bg-primary text-bg p-[var(--spacing-lg)]">
    <div class="footer-copyright flex flex-col md:flex-row justify-center items-center text-center italic gap-[var(--spacing-xs)]">
      <p>
        &copy; {new Date().getFullYear()} Cleanomatic. All rights reserved.
      </p>
      <p>
        Created by
        <a
          href="https://griffinswebservices.com"
          class="underline"
          target="_blank"
          rel="noopener noreferrer"
        >
          Griffin's Web Services
        </a>
      </p>
    </div>
  </div>
</footer>
