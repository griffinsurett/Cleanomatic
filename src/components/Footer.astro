---
import { buildMenuQueries } from "@/utils/ArrayQueryUtils";
import Menu from "./Menu/BarMenu/NavMenu.astro";
import { getContactMenuItems } from "@/queries/ContactMenuQuery";
import { getSocialMenuItems } from "@/queries/SocialMenuQuery";
import PhoneNumber from "./LoopComponents/ContactMenu/ContactInfo"; // updated contact info component
import Logo from "./Logo.astro";
import Heading from "./Heading";

// Define shared class strings for menus, headings, and menu items.
const menuListClass = "flex flex-col justify-start items-start gap-[var(--spacing-sm)] h6";
const menuHeadingClass = "text-2xl lg:text-3xl mb-[var(--spacing-md)] text-bg";
const menuItemClass = "phone-menu-item text-right"; // Used for menu items in Contact Info

const FooterMenu = [
  {
    id: "privacy",
    label: "Privacy Policy",
    slug: "/privacy-policy",
    weight: 10,
  },
  {
    id: "cookie",
    label: "Cookie Policy",
    slug: "/cookie-policy",
    weight: 20,
  },
  {
    id: "contact",
    label: "Contact Us",
    slug: "/contact-us",
    weight: 30,
  },
];
---

<footer class="flex justify-center items-center flex-col w-full">
  <div class="w-full flex flex-col lg:flex-row justify-between items-start italic bg-accent text-bg py-[var(--spacing-3xl)] px-[var(--spacing-xl)] lg:px-[var(--spacing-xl)]">
    <div class="footer-logo w-full lg:w-1/3 md:mb-[var(--spacing-xl)] mb-0">
      <Logo />
    </div>
    <div class="footer-menus w-full h5 italic flex flex-col sm:flex-row justify-between lg:w-3/5">
      <div class="footer-menu w-full md:my-[var(--spacing-lg)] my-0">
        <Heading tagName="h4" className={menuHeadingClass}>
          Info
        </Heading>
        <Menu
          listClass={menuListClass}
          items={await buildMenuQueries({ FooterMenu })}
        />
      </div>
      <div class="social-menu w-full md:my-[var(--spacing-lg)] my-0">
        <Heading tagName="h4" className={menuHeadingClass}>
          Follow Us
        </Heading>
        <Menu
          items={await getSocialMenuItems()}
          listClass={menuListClass}
        />
      </div>
      <div class="contact-info w-full md:my-[var(--spacing-lg)] my-0">
        <Heading tagName="h4" className={menuHeadingClass}>
          Contact Us
        </Heading>
        <Menu
          items={await getContactMenuItems()}
          listClass={menuListClass}
          menuItem={{
            component: PhoneNumber,
            class: menuItemClass,
          }}
        />
      </div>
    </div>
  </div>
  <div class="w-full bg-primary text-bg p-[var(--spacing-lg)]">
    <div class="footer-copyright flex flex-col md:flex-row justify-center items-center text-center italic gap-[var(--spacing-xs)]">
      <p>
        &copy; {new Date().getFullYear()} Cleanomatic. All rights reserved.
      </p>
      <p>
        Created by
        <a
          href="https://griffinswebservices.com"
          class="underline"
          target="_blank"
          rel="noopener noreferrer"
        >
          Griffin's Web Services
        </a>
      </p>
    </div>
  </div>
</footer>
